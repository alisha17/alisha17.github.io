<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Custom Links within ActiveAdmin Pages - Ruby on Rails &middot; Alisha Aneja
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>


  <!-- Icons -->
  <!-- <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">
 -->
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
</head>


  <body class="theme-base-0d">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Alisha Aneja
        </a>
      </h1>
      <p class="lead">Programmer by Profession, Explorer by Heart <3</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about.html">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archives/">Archives</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/categories/">Categories</a>
          
        
      
        
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
      
        
          
        
      
    </nav>

    <br>

    <ul class="list-inline" id="sidebar-buttons" style=" padding: 0;">
            <a href="mailto:anejaalisha37@gmail.com" class="btn-social btn-outline" title="E-Mail me">
                <i class="fa fa-fw fa-at fa-2x"></i>
            </a>
            <a href="https://github.com/alisha17" target="_blank" class="btn-social btn-outline" title="alisha17 on GitHub">
                <i class="fa fa-fw fa-github fa-2x"></i>
            </a>
            <a href="https://twitter.com/alisha_aneja17" target="_blank" class="btn-social btn-outline" title="@alisha_aneja17 on Twitter">
                <i class="fa fa-fw fa-twitter fa-2x"></i>
            </a>
            <a href="https://www.linkedin.com/in/alisha-aneja-509252128/" target="_blank" class="btn-social btn-outline" title="Alisha Aneja on LinkedIn">
                <i class="fa fa-fw fa-linkedin fa-2x"></i>
            </a>
            <a href="https://alisha17.github.io/feed.xml" target="_blank" class="btn-social btn-outline" title="http://alisha17.github.io/feed.xml">
                <i class="fa fa-fw fa-rss fa-2x"></i>
            </a>
    </ul>

    <p>&copy; 2017. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Custom Links within ActiveAdmin Pages - Ruby on Rails</h1>
  <span class="post-date">04 Oct 2017</span>
  <p>I am working on a Ruby on Rails project in my organization and I am very new to Rails. It took me days to find a way for creating custom buttons and their methods alongside the default &#39;Edit, View, Delete .....&#39; buttons.</p>

<p>I finally found a fix to this and I concluded that Rails does really magical stuff behind the scenes which isn&#39;t obvious to a new programmer.</p>

<p>So, to give an overview of my task -- I am working on creating an &#39;Instances&#39; tab on the ActiveAdmin index page. This instance page will list all of the current available AWS EC2 instances, and a link to VIEW, EDIT, DELETE (already available ones), STOP and REBOOT (custom ones, which I needed to make).</p>

<p>This is how my page looks after adding the custom links:</p>

<p><img src="http://localhost:4000/assets/ruby.png" alt="pizze"></p>

<p>Oh and I removed the &#39;EDIT&#39; link, I will show this as well. This one is pretty straighforward though.</p>

<p>So for adding the custom links:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">index</span> <span class="k">do</span>
      <span class="n">selectable_column</span>
      <span class="n">id_column</span>
      <span class="n">column</span> <span class="ss">:image_id</span>
      <span class="n">column</span> <span class="ss">:min_count</span>
      <span class="n">column</span> <span class="ss">:max_count</span>
      <span class="n">column</span> <span class="ss">:monitoring</span>
<span class="n">column</span><span class="p">()</span> <span class="p">{</span> <span class="o">|</span><span class="n">instance</span><span class="o">|</span> <span class="n">link_to</span> <span class="s1">&#39;Stop&#39;</span><span class="p">,</span> <span class="n">stop_admin_instance_path</span><span class="p">(</span><span class="n">instance</span><span class="p">),</span> <span class="nb">method</span><span class="p">:</span> <span class="ss">:post</span> <span class="p">}</span>
<span class="n">column</span><span class="p">()</span> <span class="p">{</span> <span class="o">|</span><span class="n">instance</span><span class="o">|</span> <span class="n">link_to</span> <span class="s1">&#39;Reboot&#39;</span><span class="p">}</span>
      <span class="n">actions</span>
<span class="k">end</span>
</code></pre></div>
<p>We are creating these links in the seperate columns, with the name &#39;Stop&#39;, redirect path as &quot;/admin/instances/stop&quot;, which Rails already has a helper for, nameOfMethod<em>admin</em>pageName<em>path(your</em>record), and the request method (GET/POST/PUT/DELETE). Similarly, it goes for &#39;Reboot&#39; a well. To check this helper route, run rake routes from the console.</p>

<p>Now, we will add the method for stop button, which goes like this:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">member_action</span> <span class="ss">:stop</span><span class="p">,</span> <span class="nb">method</span><span class="p">:</span> <span class="ss">:post</span> <span class="k">do</span>
       <span class="n">instance</span> <span class="o">=</span> <span class="no">Instance</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
       <span class="no">AwsService</span><span class="o">.</span><span class="n">stop_ec2_instance</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">instance_id</span><span class="p">)</span>
       <span class="n">redirect_to</span> <span class="s2">&quot;/admin/instances/&quot;</span>
<span class="k">end</span>
</code></pre></div>
<p>I have made an AWS Service to stop the instances, using aws-ruby sdk, but that&#39;s out of the scope of this post.</p>

<p>params(:id) will send the id of the record on which this method would be called, to the find method, to find this record from the table and then the further instructions will be carried out on the record.</p>

<p>And to remove the default edit link, I did as follows:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">controller</span> <span class="k">do</span>
        <span class="n">actions</span> <span class="ss">:all</span><span class="p">,</span> <span class="ss">:except</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:edit</span><span class="o">]</span>
<span class="k">end</span>
</code></pre></div>
<p>Basically, in the controller section, you specify that all actions take place except the edit one&#39;. If you wanted to remove, for example, delete action, you would just have to add delete similarly as the edit action.</p>

<p>I hope this would help someone :)</p>

</div>


  
  

  

  


<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://alisha17-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


 â€¢ <a href="https://alisha17.github.io/ruby%20on%20rails/2017/10/04/custom-rails.html#disqus_thread">0 Comments</a>

    </div>

    <script id="dsq-count-scr" src="//alisha17-github-io.disqus.com/count.js" async></script>

    

  </body>
</html>
